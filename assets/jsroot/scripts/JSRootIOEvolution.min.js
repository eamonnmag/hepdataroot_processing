(function(){if(typeof JSROOT!="object"){var a=new Error("This extension requires JSRootCore.js");a.source="JSRootIOEvolution.js";throw a}if(typeof JSROOT.IO=="object"){var a=new Error("This JSROOT IO already loaded");a.source="JSRootIOEvolution.js";throw a}JSROOT.IO={kBase:0,kOffsetL:20,kOffsetP:40,kCounter:6,kCharStar:7,kChar:1,kShort:2,kInt:3,kLong:4,kFloat:5,kDouble:8,kDouble32:9,kLegacyChar:10,kUChar:11,kUShort:12,kUInt:13,kULong:14,kBits:15,kLong64:16,kULong64:17,kBool:18,kFloat16:19,kObject:61,kAny:62,kObjectp:63,kObjectP:64,kTString:65,kTObject:66,kTNamed:67,kAnyp:68,kAnyP:69,kAnyPnoVT:70,kSTLp:71,kSkip:100,kSkipL:120,kSkipP:140,kConv:200,kConvL:220,kConvP:240,kSTL:300,kSTLstring:365,kStreamer:500,kStreamLoop:501,kMapOffset:2,kByteCountMask:1073741824,kNewClassTag:4294967295,kClassMask:2147483648,Z_DEFLATED:8,Z_HDRSIZE:9};JSROOT.fUserStreamers=null;JSROOT.addUserStreamer=function(c,b){if(JSROOT.fUserStreamers==null){JSROOT.fUserStreamers={}}JSROOT.fUserStreamers[c]=b};JSROOT.R__unzip_header=function(d,c,b){if(c+JSROOT.IO.Z_HDRSIZE>d.length){if(!b){alert("Error R__unzip_header: header size exceeds buffer size")}return -1}if(!(d.charAt(c)=="Z"&&d.charAt(c+1)=="L"&&d.charCodeAt(c+2)==JSROOT.IO.Z_DEFLATED)&&!(d.charAt(c)=="C"&&d.charAt(c+1)=="S"&&d.charCodeAt(c+2)==JSROOT.IO.Z_DEFLATED)&&!(d.charAt(c)=="X"&&d.charAt(c+1)=="Z"&&d.charCodeAt(c+2)==0)){if(!b){alert("Error R__unzip_header: error in header")}return -1}return JSROOT.IO.Z_HDRSIZE+((d.charCodeAt(c+3)&255)|((d.charCodeAt(c+4)&255)<<8)|((d.charCodeAt(c+5)&255)<<16))};JSROOT.R__unzip=function(g,f,e,b){if(g<JSROOT.IO.Z_HDRSIZE){if(!b){alert("R__unzip: too small source")}return null}if(!(f.charAt(e)=="Z"&&f.charAt(e+1)=="L"&&f.charCodeAt(e+2)==JSROOT.IO.Z_DEFLATED)&&!(f.charAt(e)=="C"&&f.charAt(e+1)=="S"&&f.charCodeAt(e+2)==JSROOT.IO.Z_DEFLATED)&&!(f.charAt(e)=="X"&&f.charAt(e+1)=="Z"&&f.charCodeAt(e+2)==0)){if(!b){alert("Error R__unzip: error in header")}return null}var c=((f.charCodeAt(e+3)&255)|((f.charCodeAt(e+4)&255)<<8)|((f.charCodeAt(e+5)&255)<<16));if(c+JSROOT.IO.Z_HDRSIZE!=g){if(!b){alert("R__unzip: discrepancy in source length")}return null}if(f.charAt(e)=="Z"&&f.charAt(e+1)=="L"){var d=f.substr(e+JSROOT.IO.Z_HDRSIZE+2,g);return RawInflate.inflate(d)}else{if(!b){alert("R__unzip: Old zlib format is not supported!")}return null}return null};JSROOT.ReconstructObject=function(f,b,e){var d=new JSROOT.TFile;var c=new JSROOT.TBuffer(e,0,d);d.ExtractStreamerInfos(c);var g={};c=new JSROOT.TBuffer(b,0,d);c.MapObject(g,1);c.ClassStreamer(g,f);return g};JSROOT.TBuffer=function(d,b,c){this._typename="TBuffer";this.b=d;this.o=(b==null)?0:b;this.fFile=c;this.ClearObjectMap();this.fTagOffset=0;return this};JSROOT.TBuffer.prototype.locate=function(b){this.o=b};JSROOT.TBuffer.prototype.shift=function(b){this.o+=b};JSROOT.TBuffer.prototype.ntou1=function(){return(this.b.charCodeAt(this.o++)&255)>>>0};JSROOT.TBuffer.prototype.ntou2=function(){var b=((this.b.charCodeAt(this.o)&255)<<8)>>>0;b+=(this.b.charCodeAt(this.o+1)&255)>>>0;this.o+=2;return b};JSROOT.TBuffer.prototype.ntou4=function(){var b=((this.b.charCodeAt(this.o)&255)<<24)>>>0;b+=((this.b.charCodeAt(this.o+1)&255)<<16)>>>0;b+=((this.b.charCodeAt(this.o+2)&255)<<8)>>>0;b+=(this.b.charCodeAt(this.o+3)&255)>>>0;this.o+=4;return b};JSROOT.TBuffer.prototype.ntou8=function(){var b=((this.b.charCodeAt(this.o)&255)<<56)>>>0;b+=((this.b.charCodeAt(this.o+1)&255)<<48)>>>0;b+=((this.b.charCodeAt(this.o+2)&255)<<40)>>>0;b+=((this.b.charCodeAt(this.o+3)&255)<<32)>>>0;b+=((this.b.charCodeAt(this.o+4)&255)<<24)>>>0;b+=((this.b.charCodeAt(this.o+5)&255)<<16)>>>0;b+=((this.b.charCodeAt(this.o+6)&255)<<8)>>>0;b+=(this.b.charCodeAt(this.o+7)&255)>>>0;this.op+=8;return b};JSROOT.TBuffer.prototype.ntoi1=function(){return(this.b.charCodeAt(this.o++)&255)};JSROOT.TBuffer.prototype.ntoi2=function(){var b=(this.b.charCodeAt(this.o)&255)<<8;b+=(this.b.charCodeAt(this.o+1)&255);this.o+=2;return b};JSROOT.TBuffer.prototype.ntoi4=function(){var b=((this.b.charCodeAt(this.o)&255)<<24)+((this.b.charCodeAt(this.o+1)&255)<<16)+((this.b.charCodeAt(this.o+2)&255)<<8)+((this.b.charCodeAt(this.o+3)&255));this.o+=4;return b};JSROOT.TBuffer.prototype.ntoi8=function(c,d){var e=(this.b.charCodeAt(this.o)&255)<<56;e+=(this.b.charCodeAt(this.o+1)&255)<<48;e+=(this.b.charCodeAt(this.o+2)&255)<<40;e+=(this.b.charCodeAt(this.o+3)&255)<<32;e+=(this.b.charCodeAt(this.o+4)&255)<<24;e+=(this.b.charCodeAt(this.o+5)&255)<<16;e+=(this.b.charCodeAt(this.o+6)&255)<<8;e+=(this.b.charCodeAt(this.o+7)&255);this.o+=8;return e};JSROOT.TBuffer.prototype.ntof=function(){var c=this.b.substring(this.o,this.o+4);this.o+=4;if(c.length<4){return Number.NaN}var k="";for(var d=0;d<4;d++){var b=(c.charCodeAt(d)&255).toString(2);var e=b.length;if(e<8){for(var h=0;h<(8-e);h++){b="0"+b}}k=k+b}var g=(k.charAt(0)=="1")?-1:1;var j=parseInt(k.substring(1,9),2)-127;var f;if(j==-127){f=0}else{f=1;for(var d=0;d<23;d++){if(parseInt(k.substr(9+d,1))==1){f=f+1/Math.pow(2,d+1)}}}return(g*Math.pow(2,j)*f)};JSROOT.TBuffer.prototype.ntod=function(){var c=this.b.substring(this.o,this.o+8);this.o+=8;if(c.length<8){return Number.NaN}var k="";for(var d=0;d<8;d++){var b=(c.charCodeAt(d)&255).toString(2);var e=b.length;if(e<8){for(var h=0;h<(8-e);h++){b="0"+b}}k=k+b}var g=(k.charAt(0)=="1")?-1:1;var j=parseInt(k.substring(1,12),2)-1023;var f;if(j==-127){f=0}else{f=1;for(var d=0;d<52;d++){if(parseInt(k.substr(12+d,1))==1){f=f+1/Math.pow(2,d+1)}}}return(g*Math.pow(2,j)*f)};JSROOT.TBuffer.prototype.ReadFastArray=function(e,c){var d=new Array();switch(c){case"D":for(var b=0;b<e;++b){d[b]=this.ntod();if(Math.abs(d[b])<1e-300){d[b]=0}}break;case"F":for(var b=0;b<e;++b){d[b]=this.ntof();if(Math.abs(d[b])<1e-300){d[b]=0}}break;case"L":for(var b=0;b<e;++b){d[b]=this.ntoi8()}break;case"LU":for(var b=0;b<e;++b){d[b]=this.ntou8()}break;case"I":for(var b=0;b<e;++b){d[b]=this.ntoi4()}break;case"U":for(var b=0;b<e;++b){d[b]=this.ntou4()}break;case"S":for(var b=0;b<e;++b){d[b]=this.ntoi2()}break;case"C":for(var b=0;b<e;++b){d[b]=this.b.charCodeAt(this.o++)&255}break;case"TString":for(var b=0;b<e;++b){d[b]=this.ReadTString()}break;default:for(var b=0;b<e;++b){d[b]=this.ntou4()}break}return d};JSROOT.TBuffer.prototype.ReadBasicPointer=function(b,d){var c=this.b.charCodeAt(this.o++)&255;if(c){return this.ReadFastArray(b,d)}if(b==0){return new Array()}this.o--;return this.ReadFastArray(b,d)};JSROOT.TBuffer.prototype.ReadString=function(d){d=typeof(d)!="undefined"?d:0;var b=0;var c=this.o;while((d==0)||(b<d)){if((this.b.charCodeAt(this.o++)&255)==0){break}b++}return(b==0)?"":this.b.substring(c,c+b)};JSROOT.TBuffer.prototype.ReadTString=function(){var b=this.b.charCodeAt(this.o++)&255;if(b==255){b=this.ntou4()}var c=this.o;this.o+=b;return(this.b.charCodeAt(c)==0)?"":this.b.substring(c,c+b)};JSROOT.TBuffer.prototype.GetMappedObject=function(b){return this.fObjectMap[b]};JSROOT.TBuffer.prototype.MapObject=function(b,c){if(c==null){return}this.fObjectMap[b]=c};JSROOT.TBuffer.prototype.MapClass=function(b,c){this.fClassMap[b]=c};JSROOT.TBuffer.prototype.GetMappedClass=function(b){if(b in this.fClassMap){return this.fClassMap[b]}return -1};JSROOT.TBuffer.prototype.ClearObjectMap=function(){this.fObjectMap={};this.fClassMap={};this.fObjectMap[0]=null};JSROOT.TBuffer.prototype.ReadVersion=function(){var b={};var c=this.ntou4();if(c&JSROOT.IO.kByteCountMask){b.bytecnt=c-JSROOT.IO.kByteCountMask-2}b.val=this.ntou2();b.off=this.o;return b};JSROOT.TBuffer.prototype.CheckBytecount=function(b,c){if(("bytecnt" in b)&&(b.off+b.bytecnt!=this.o)){if(c!=null){alert("Missmatch in "+c+" bytecount expected = "+b.bytecnt+"  got = "+(this.o-b.off))}this.o=b.off+b.bytecnt;return false}return true};JSROOT.TBuffer.prototype.ReadTObject=function(b){this.o+=2;if((!"_typename" in b)||(b._typename=="")){b._typename="TObject"}b.fUniqueID=this.ntou4();b.fBits=this.ntou4();return true};JSROOT.TBuffer.prototype.ReadTNamed=function(c){var b=this.ReadVersion();this.ReadTObject(c);c.fName=this.ReadTString();c.fTitle=this.ReadTString();return this.CheckBytecount(b,"ReadTNamed")};JSROOT.TBuffer.prototype.ReadTObjString=function(c){var b=this.ReadVersion();this.ReadTObject(c);c.fString=this.ReadTString();return this.CheckBytecount(b,"ReadTObjString")};JSROOT.TBuffer.prototype.ReadTList=function(e){e._typename="TList";e.name="";e.arr=new Array;e.opt=new Array;var b=this.ReadVersion();if(b.val>3){this.ReadTObject(e);e.name=this.ReadTString();var g=this.ntou4();for(var d=0;d<g;++d){var f=this.ReadObjectAny();e.arr.push(f);var c=this.ReadTString();e.opt.push(c)}}return this.CheckBytecount(b)};JSROOT.TBuffer.prototype.ReadTObjArray=function(e){e._typename="TObjArray";e.name="";e.arr=new Array();var b=this.ReadVersion();if(b.val>2){this.ReadTObject(e)}if(b.val>1){e.name=this.ReadTString()}var g=this.ntou4();var c=this.ntou4();for(var d=0;d<g;d++){var f=this.ReadObjectAny();e.arr.push(f)}return this.CheckBytecount(b,"ReadTObjArray")};JSROOT.TBuffer.prototype.ReadTClonesArray=function(h){h._typename="TClonesArray";h.name="";h.arr=new Array();var g=this.ReadVersion();if(g.val>2){this.ReadTObject(h)}if(g.val>1){h.name=this.ReadTString()}var l=this.ReadTString();var f=l;var k=0;var j=l.indexOf(";");if(j!=-1){f=l.slice(0,j);l=l.slice(j+1,l.length()-j-1);k=parseInt(l)}var b=this.ntou4();if(b<0){b=-b}var c=this.ntou4();for(var e=0;e<b;e++){var d={};this.ClassStreamer(d,f);h.arr.push(d)}return this.CheckBytecount(g,"ReadTClonesArray")};JSROOT.TBuffer.prototype.ReadTPolyMarker3D=function(c){var b=this.ReadVersion();this.ReadTObject(c);this.ClassStreamer(c,"TAttMarker");c.fN=this.ntoi4();c.fP=this.ReadFastArray(c.fN*3,"F");c.fOption=this.ReadTString();if(b.val>1){c.fName=this.ReadTString()}else{c.fName="TPolyMarker3D"}return this.CheckBytecount(b,"ReadTPolyMarker3D")};JSROOT.TBuffer.prototype.ReadTCollection=function(d,g,f){d._typename="TCollection";d.name="";d.arr=new Array();var b=this.ReadVersion();if(b.val>2){this.ReadTObject(d)}if(b.val>1){d.name=this.ReadTString()}var e=this.ntou4();for(var c=0;c<e;c++){f+=10;d.arr.push(null)}return this.CheckBytecount(b,"ReadTCollection")};JSROOT.TBuffer.prototype.ReadTCanvas=function(c){var b=this.ReadVersion();this.ClassStreamer(c,"TPad");c.fDISPLAY=this.ReadTString();c.fDoubleBuffer=this.ntoi4();c.fRetained=this.ntou1()!=0;c.fXsizeUser=this.ntoi4();c.fYsizeUser=this.ntoi4();c.fXsizeReal=this.ntoi4();c.fYsizeReal=this.ntoi4();c.fWindowTopX=this.ntoi4();c.fWindowTopY=this.ntoi4();c.fWindowWidth=this.ntoi4();c.fWindowHeight=this.ntoi4();c.fCw=this.ntou4();c.fCh=this.ntou4();c.fCatt={};this.ClassStreamer(c.fCatt,"TAttCanvas");this.ntou1();this.ntou1();c.fHighLightColor=this.ntoi2();c.fBatch=this.ntou1()!=0;this.ntou1();this.ntou1();this.ntou1();return this.CheckBytecount(b,"TCanvas")};JSROOT.TBuffer.prototype.ReadTStreamerInfo=function(c){var b=this.ReadVersion();if(b.val>1){this.ReadTNamed(c);c.fCheckSum=this.ntou4();c.fClassVersion=this.ntou4();c.fElements=this.ReadObjectAny()}return this.CheckBytecount(b,"ReadTStreamerInfo")};JSROOT.TBuffer.prototype.ReadStreamerElement=function(b){var c=this.ReadVersion();this.ReadTNamed(b);b.type=this.ntou4();b.size=this.ntou4();b.length=this.ntou4();b.dim=this.ntou4();if(c.val==1){var d=this.ntou4();b.maxindex=this.ReadFastArray(d,"U")}else{b.maxindex=this.ReadFastArray(5,"U")}b.fTypeName=this.ReadTString();b.typename=b.fTypeName;if((b.type==11)&&(b.typename=="Bool_t"||b.typename=="bool")){b.type=18}if(c.val>1){b.uuid=0}if(c.val<=2){}if(c.val==3){b.xmin=this.ntou4();b.xmax=this.ntou4();b.factor=this.ntou4()}if(c.val>3){}return this.CheckBytecount(c,"ReadStreamerElement")};JSROOT.TBuffer.prototype.ReadStreamerBase=function(c){var b=this.ReadVersion();this.ReadStreamerElement(c);if(b.val>2){c.baseversion=this.ntou4()}return this.CheckBytecount(b,"ReadStreamerBase")};JSROOT.TBuffer.prototype.ReadStreamerBasicType=function(c){var b=this.ReadVersion();if(b.val>1){this.ReadStreamerElement(c)}return this.CheckBytecount(b,"ReadStreamerBasicType")};JSROOT.TBuffer.prototype.ReadStreamerBasicPointer=function(c){var b=this.ReadVersion();if(b.val>1){this.ReadStreamerElement(c);c.countversion=this.ntou4();c.countName=this.ReadTString();c.countClass=this.ReadTString()}return this.CheckBytecount(b,"ReadStreamerBasicPointer")};JSROOT.TBuffer.prototype.ReadStreamerSTL=function(b){var c=this.ReadVersion();if(c.val>2){this.ReadStreamerElement(b);b.stltype=this.ntou4();b.ctype=this.ntou4()}return this.CheckBytecount(c,"ReadStreamerSTL")};JSROOT.TBuffer.prototype.ReadTStreamerObject=function(c){var b=this.ReadVersion();if(b.val>1){this.ReadStreamerElement(c)}return this.CheckBytecount(b,"ReadTStreamerObject")};JSROOT.TBuffer.prototype.ReadClass=function(){var f={};f.name=-1;var b=0;var e=this.ntou4();var d=this.o;if(!(e&JSROOT.IO.kByteCountMask)||(e==JSROOT.IO.kNewClassTag)){b=e;e=0}else{b=this.ntou4()}if(!(b&JSROOT.IO.kClassMask)){f.objtag=b;return f}if(b==JSROOT.IO.kNewClassTag){f.name=this.ReadString();if(this.GetMappedClass(this.fTagOffset+d+JSROOT.IO.kMapOffset)==-1){this.MapClass(this.fTagOffset+d+JSROOT.IO.kMapOffset,f.name)}}else{var c=(b&~JSROOT.IO.kClassMask);f.name=this.GetMappedClass(c);if(f.name==-1){alert("Did not found class with tag "+c)}}return f};JSROOT.TBuffer.prototype.ReadObjectAny=function(){var b=this.o;var d=this.ReadClass();if("objtag" in d){return this.GetMappedObject(d.objtag)}if(d.name==-1){return null}var c={};this.MapObject(this.fTagOffset+b+JSROOT.IO.kMapOffset,c);this.ClassStreamer(c,d.name);return c};JSROOT.TBuffer.prototype.ClassStreamer=function(e,d){if(!("_typename" in e)){e._typename=d}if(d=="TObject"||d=="TMethodCall"){this.ReadTObject(e)}else{if(d=="TQObject"){}else{if(d=="TObjString"){this.ReadTObjString(e)}else{if(d=="TObjArray"){this.ReadTObjArray(e)}else{if(d=="TClonesArray"){this.ReadTClonesArray(e)}else{if((d=="TList")||(d=="THashList")){this.ReadTList(e)}else{if(d=="TCollection"){this.ReadTCollection(e);alert("Trying to read TCollection - wrong!!!")}else{if(d=="TCanvas"){this.ReadTCanvas(e)}else{if(d=="TPolyMarker3D"){this.ReadTPolyMarker3D(e)}else{if(d=="TStreamerInfo"){this.ReadTStreamerInfo(e)}else{if(d=="TStreamerBase"){this.ReadStreamerBase(e)}else{if(d=="TStreamerBasicType"){this.ReadStreamerBasicType(e)}else{if((d=="TStreamerBasicPointer")||(d=="TStreamerLoop")){this.ReadStreamerBasicPointer(e)}else{if(d=="TStreamerSTL"){this.ReadStreamerSTL(e)}else{if(d=="TStreamerObject"||d=="TStreamerObjectAny"||d=="TStreamerString"||d=="TStreamerObjectPointer"){this.ReadTStreamerObject(e)}else{var c=this.fFile.GetStreamer(d);if(c!=null){c.Stream(e,this)}else{console.log("Did not found streamer for class "+d+" try to skip data");var b=this.ReadVersion();this.CheckBytecount(b)}}}}}}}}}}}}}}}}JSROOT.addMethods(e)};JSROOT.TStreamer=function(b){this.fFile=b;this._typename="TStreamer";return this};JSROOT.TStreamer.prototype.ReadBasicType=function(b,d,f){switch(this[f]["type"]){case JSROOT.IO.kBase:break;case JSROOT.IO.kOffsetL:break;case JSROOT.IO.kOffsetP:break;case JSROOT.IO.kCharStar:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"C");break;case JSROOT.IO.kChar:case JSROOT.IO.kLegacyChar:d[f]=b.b.charCodeAt(b.o++)&255;break;case JSROOT.IO.kShort:d[f]=b.ntoi2();break;case JSROOT.IO.kInt:case JSROOT.IO.kCounter:d[f]=b.ntoi4();break;case JSROOT.IO.kLong:d[f]=b.ntoi8();break;case JSROOT.IO.kFloat:case JSROOT.IO.kDouble32:d[f]=b.ntof();if(Math.abs(d[f])<1e-300){d[f]=0}break;case JSROOT.IO.kDouble:d[f]=b.ntod();if(Math.abs(d[f])<1e-300){d[f]=0}break;case JSROOT.IO.kUChar:d[f]=(b.b.charCodeAt(b.o++)&255)>>>0;break;case JSROOT.IO.kUShort:d[f]=b.ntou2();break;case JSROOT.IO.kUInt:d[f]=b.ntou4();break;case JSROOT.IO.kULong:d[f]=b.ntou8();break;case JSROOT.IO.kBits:alert("failed to stream "+f+" ("+this[f]["typename"]+")");break;case JSROOT.IO.kLong64:d[f]=b.ntoi8();break;case JSROOT.IO.kULong64:d[f]=b.ntou8();break;case JSROOT.IO.kBool:d[f]=(b.b.charCodeAt(b.o++)&255)!=0;break;case JSROOT.IO.kFloat16:d[f]=0;b.o+=2;break;case JSROOT.IO.kAny:case JSROOT.IO.kAnyp:case JSROOT.IO.kObjectp:case JSROOT.IO.kObject:var c=this[f]["typename"];if(c.charAt(c.length-1)=="*"){c=c.substr(0,c.length-1)}d[f]={};b.ClassStreamer(d[f],c);break;case JSROOT.IO.kAnyP:case JSROOT.IO.kObjectP:d[f]=b.ReadObjectAny();break;case JSROOT.IO.kTString:d[f]=b.ReadTString();break;case JSROOT.IO.kTObject:b.ReadTObject(d);break;case JSROOT.IO.kTNamed:b.ReadTNamed(d);break;case JSROOT.IO.kAnyPnoVT:case JSROOT.IO.kSTLp:case JSROOT.IO.kSkip:case JSROOT.IO.kSkipL:case JSROOT.IO.kSkipP:case JSROOT.IO.kConv:case JSROOT.IO.kConvL:case JSROOT.IO.kConvP:case JSROOT.IO.kSTL:case JSROOT.IO.kSTLstring:case JSROOT.IO.kStreamer:case JSROOT.IO.kStreamLoop:alert("failed to stream "+f+" ("+this[f]["typename"]+")");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kShort:case JSROOT.IO.kOffsetL+JSROOT.IO.kUShort:alert("Strange code was here????");var e=this[f]["length"];d[f]=b.ReadFastArray(e,"S");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kInt:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"I");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kUInt:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"U");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kULong:case JSROOT.IO.kOffsetL+JSROOT.IO.kULong64:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"LU");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kLong:case JSROOT.IO.kOffsetL+JSROOT.IO.kLong64:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"L");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kFloat:case JSROOT.IO.kOffsetL+JSROOT.IO.kDouble32:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"F");break;case JSROOT.IO.kOffsetL+JSROOT.IO.kDouble:var e=this[f]["length"];d[f]=b.ReadFastArray(e,"D");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kChar:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"C");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kShort:case JSROOT.IO.kOffsetP+JSROOT.IO.kUShort:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"S");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kInt:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"I");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kUInt:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"U");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kULong:case JSROOT.IO.kOffsetP+JSROOT.IO.kULong64:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"LU");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kLong:case JSROOT.IO.kOffsetP+JSROOT.IO.kLong64:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"L");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kFloat:case JSROOT.IO.kOffsetP+JSROOT.IO.kDouble32:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"F");break;case JSROOT.IO.kOffsetP+JSROOT.IO.kDouble:var e=d[this[f]["cntname"]];d[f]=b.ReadBasicPointer(e,"D");break;default:alert("failed to stream "+f+" ("+this[f]["typename"]+")");break}};JSROOT.TStreamer.prototype.Stream=function(h,e){var j=e.ReadVersion();for(var b in this){if(!this[b]||typeof(this[b])==="function"){continue}if(this[b]["typename"]==="BASE"){var c=this[b]["class"];if(this[b]["class"].indexOf("TArray")==0){var o=this[b]["class"].charAt(6);var k=e.ntou4();h.fArray=e.ReadFastArray(k,o)}else{e.ClassStreamer(h,this[b]["class"])}}}for(var b in this){if(!this[b]||typeof(this[b])==="function"){continue}var d=this[b]["typename"];if(typeof(d)==="undefined"||d==="BASE"){continue}if(JSROOT.fUserStreamers!==null){var m=JSROOT.fUserStreamers[d];if(m!==undefined){m(e,h,b,this);continue}}switch(d){case"TString*":var l=e.ReadVersion();h[b]=new Array();for(var g=0;g<h[this[b]["cntname"]];++g){h[b][g]=e.ReadTString()}e.CheckBytecount(l,"TString* array");break;case"TArrayC":case"TArrayD":case"TArrayF":case"TArrayI":case"TArrayL":case"TArrayL64":case"TArrayS":var o=this[b]["typename"].charAt(6);var f=e.ntou4();h[b]=e.ReadFastArray(f,o);break;case"TObject":e.ReadTObject(h);break;case"TQObject":break;default:this.ReadBasicType(e,h,b);break}}if(("fBits" in h)&&!("TestBit" in h)){h.TestBit=function(i){return((h.fBits&i)!=0)}}e.CheckBytecount(j,"TStreamer.Stream");return e.o};JSROOT.TDirectory=function(d,e,c){if(!(this instanceof arguments.callee)){var b=new Error("you must use new to instantiate this class");b.source="JSROOT.TDirectory.ctor";throw b}this.fFile=d;this._typename="TDirectory";this["dir_name"]=e;this["dir_cycle"]=c;this.fKeys=new Array();return this};JSROOT.TDirectory.prototype.GetKey=function(g,c,e){for(var b in this.fKeys){if(this.fKeys[b]["fName"]==g&&this.fKeys[b]["fCycle"]==c){JSROOT.CallBack(e,this.fKeys[b]);return this.fKeys[b]}}var j=g.lastIndexOf("/");while(j>0){var f=g.substr(0,j);var h=g.substr(j+1);var d=this.GetKey(f,1);if((d!=null)&&(typeof e=="function")&&(d.fClassName.indexOf("TDirectory")==0)){this.fFile.ReadObject(this["dir_name"]+"/"+f,1,function(i){if(i){i.GetKey(h,c,e)}});return null}j=g.lastIndexOf("/",j-1)}JSROOT.CallBack(e,null);return null};JSROOT.TDirectory.prototype.ReadKeys=function(b){var e=this;var d=this.fFile;var c=this.fNbytesName+22;c+=4;c+=4;c+=18;if(d.fVersion>=40000){c+=12}d.Seek(this.fSeekDir,this.fFile.ERelativeTo.kBeg);d.ReadBuffer(c,function(h){if(h==null){return JSROOT.CallBack(b,null)}var f=new JSROOT.TBuffer(h,e.fNbytesName,d);e.StreamHeader(f);f.locate(4);var g=f.ntoi2();if(g>1000){f.shift(28)}else{f.shift(20)}f.ReadTString();f.ReadTString();e.fTitle=f.ReadTString();if(e.fNbytesName<10||e.fNbytesName>10000){console.log("Cannot read directory info of file "+d.fURL);return JSROOT.CallBack(b,null)}if(e.fSeekKeys<=0){return JSROOT.CallBack(b,null)}d.Seek(e.fSeekKeys,d.ERelativeTo.kBeg);d.ReadBuffer(e.fNbytesKeys,function(n){if(n==null){return JSROOT.CallBack(b,null)}var j=new JSROOT.TBuffer(n,0,d);var l=d.ReadKey(j);var m=j.ntoi4();for(var k=0;k<m;k++){l=d.ReadKey(j);e.fKeys.push(l)}d.fDirectories.push(e);delete j;JSROOT.CallBack(b,e)});delete f})};JSROOT.TDirectory.prototype.StreamHeader=function(c){var b=c.ntou2();var d=b%1000;c.shift(8);this.fNbytesKeys=c.ntou4();this.fNbytesName=c.ntou4();this.fSeekDir=(b>1000)?c.ntou8():c.ntou4();this.fSeekParent=(b>1000)?c.ntou8():c.ntou4();this.fSeekKeys=(b>1000)?c.ntou8():c.ntou4();if(d>2){c.shift(18)}};JSROOT.TFile=function(d,b){if(!(this instanceof arguments.callee)){var c=new Error("you must use new to instantiate this class");c.source="JSROOT.TFile.ctor";throw c}this._typename="TFile";this.fOffset=0;this.fEND=0;this.fFullURL=d;this.fURL=d;this.fAcceptRanges=true;this.fUseStampPar=true;this.fFileContent="";this.ERelativeTo={kBeg:0,kCur:1,kEnd:2};this.fDirectories=new Array();this.fKeys=new Array();this.fSeekInfo=0;this.fNbytesInfo=0;this.fTagOffset=0;this.fStreamers=0;this.fStreamerInfos=null;this.fFileName="";this.fStreamers=new Array;if(typeof this.fURL!="string"){return this}if(this.fURL.charAt(this.fURL.length-1)=="+"){this.fURL=this.fURL.substr(0,this.fURL.length-1);this.fAcceptRanges=false}var g=Math.max(this.fURL.lastIndexOf("/"),this.fURL.lastIndexOf("\\"));this.fFileName=g>=0?this.fURL.substr(g+1):this.fURL;if(!this.fAcceptRanges){this.ReadKeys(b)}else{var e=this;var f=JSROOT.NewHttpRequest(this.fURL,"head",function(i){if(i==null){return JSROOT.CallBack(b,null)}var j=i.getResponseHeader("Accept-Ranges");if(j==null){e.fAcceptRanges=false}var h=i.getResponseHeader("Content-Length");if(h!=null){e.fEND=parseInt(h)}else{e.fAcceptRanges=false}e.ReadKeys(b)});f.send(null)}return this};JSROOT.TFile.prototype.ReadBuffer=function(b,i){if((this.fFileContent.length>0)&&(!this.fAcceptRanges||(this.fOffset+b<=this.fFileContent.length))){return i(this.fFileContent.substr(this.fOffset,b))}var e=this;var c=this.fURL;if(this.fUseStampPar){if(c.indexOf("?")>0){c+="&stamp="}else{c+="?stamp="}var h=new Date;c+=h.getTime()}function f(d){if((d==null)&&e.fUseStampPar&&(e.fOffset==0)){e.fUseStampPar=false;var j=JSROOT.NewHttpRequest(this.fURL,"bin",f);if(this.fAcceptRanges){j.setRequestHeader("Range","bytes="+this.fOffset+"-"+(this.fOffset+b-1))}j.send(null);return}else{if((d!=null)&&(e.fOffset==0)&&(e.fFileContent.length==0)){e.fFileContent=d;if(!this.fAcceptRanges){e.fEND=d.length;d=e.fFileContent.substr(e.fOffset,b)}}}i(d)}var g=JSROOT.NewHttpRequest(c,"bin",f);if(this.fAcceptRanges){g.setRequestHeader("Range","bytes="+this.fOffset+"-"+(this.fOffset+b-1))}g.send(null)};JSROOT.TFile.prototype.Seek=function(b,c){switch(c){case this.ERelativeTo.kBeg:this.fOffset=b;break;case this.ERelativeTo.kCur:this.fOffset+=b;break;case this.ERelativeTo.kEnd:if(this.fEND==0){throw"Seek : seeking from end in file with fEND==0 is not supported"}this.fOffset=this.fEND-b;break;default:throw"Seek : unknown seek option ("+c+")";break}};JSROOT.TFile.prototype.ReadKey=function(c){var d={};d.fNbytes=c.ntoi4();d.fVersion=c.ntoi2();d.fObjlen=c.ntou4();var e=c.ntou4();d.fDatime=new Date();d.fDatime.setFullYear((e>>>26)+1995);d.fDatime.setMonth((e<<6)>>>28);d.fDatime.setDate((e<<10)>>>27);d.fDatime.setHours((e<<15)>>>27);d.fDatime.setMinutes((e<<20)>>>26);d.fDatime.setSeconds((e<<26)>>>26);d.fDatime.setMilliseconds(0);d.fKeylen=c.ntou2();d.fCycle=c.ntou2();if(d.fVersion>1000){d.fSeekKey=c.ntou8();c.shift(8)}else{d.fSeekKey=c.ntou4();c.shift(4)}d.fClassName=c.ReadTString();d.fName=c.ReadTString();d.fTitle=c.ReadTString();var b=d.fName.replace(/['"]/g,"");if(b!=d.fName){d.fRealName=d.fName;d.fName=b}return d};JSROOT.TFile.prototype.GetDir=function(e,d){if((d==null)&&(typeof e=="string")){var f=e.lastIndexOf(";");if(f>0){d=e.substr(f+1);e=e.substr(0,f)}}for(var c in this.fDirectories){var b=this.fDirectories[c];if(b.dir_name!=e){continue}if((d!=null)&&(b.dir_cycle!=d)){continue}return b}return null};JSROOT.TFile.prototype.GetKey=function(f,d,b){for(var e in this.fKeys){if(this.fKeys[e]["fName"]==f&&this.fKeys[e]["fCycle"]==d){JSROOT.CallBack(b,this.fKeys[e]);return this.fKeys[e]}}var j=f.lastIndexOf("/");while(j>0){var g=f.substr(0,j);var k=f.substr(j+1);var c=this.GetDir(g);if(c!=null){return c.GetKey(k,d,b)}var h=this.GetKey(g,1);if((h!=null)&&(b!=null)&&(h.fClassName.indexOf("TDirectory")==0)){this.ReadObject(g,function(i){if(i){i.GetKey(k,d,b)}});return null}j=f.lastIndexOf("/",j-1)}JSROOT.CallBack(b,null);return null};JSROOT.TFile.prototype.ReadObjBuffer=function(c,d){var b=this;this.Seek(c.fSeekKey+c.fKeylen,this.ERelativeTo.kBeg);this.ReadBuffer(c.fNbytes-c.fKeylen,function(h){if(h==null){d(null)}var e=null;if(c.fObjlen<=c.fNbytes-c.fKeylen){e=new JSROOT.TBuffer(h,0,b)}else{var f=JSROOT.R__unzip_header(h,0);if(f<0){return d(null)}var g=JSROOT.R__unzip(f,h,0);e=new JSROOT.TBuffer(g,0,b)}e.fTagOffset=c.fKeylen;d(e);delete e})};JSROOT.TFile.prototype.ReadObject=function(b,e,d){if(typeof e=="function"){d=e;e=1}var f=b.lastIndexOf(";");if(f>0){e=parseInt(b.slice(f+1));b=b.slice(0,f)}if((typeof e!="number")||(e<0)){e=1}while((b.length>0)&&(b[0]=="/")){b=b.substr(1)}var c=this;this.GetKey(b,e,function(i){if(i==null){return JSROOT.CallBack(d,null)}if((b=="StreamerInfo")&&(i.fClassName=="TList")){return c.fStreamerInfos}var g=false;if((i.fClassName=="TDirectory"||i.fClassName=="TDirectoryFile")){g=true;var h=c.GetDir(b,e);if(h!=null){return JSROOT.CallBack(d,h)}}c.ReadObjBuffer(i,function(k){if(!k){return JSROOT.CallBack(d,null)}if(g){var j=new JSROOT.TDirectory(c,b,e);j.StreamHeader(k);if(j.fSeekKeys){j.ReadKeys(d)}else{JSROOT.CallBack(d,j)}return}var l={};k.MapObject(1,l);k.ClassStreamer(l,i.fClassName);JSROOT.CallBack(d,l)})})};JSROOT.TFile.prototype.ExtractStreamerInfos=function(c){if(!c){return}var b={};c.MapObject(1,b);c.ClassStreamer(b,"TList");b._typename="TStreamerInfoList";this.fStreamerInfos=b};JSROOT.TFile.prototype.ReadFormulas=function(){for(var b in this.fKeys){if(this.fKeys[b]["fClassName"]=="TFormula"){this.ReadObject(this.fKeys[b]["fName"],this.fKeys[b]["fCycle"],function(c){JSROOT.addFormula(c)})}}};JSROOT.TFile.prototype.ReadStreamerInfos=function(c){if(this.fSeekInfo==0||this.fNbytesInfo==0){return c(null)}this.Seek(this.fSeekInfo,this.ERelativeTo.kBeg);var b=this;b.ReadBuffer(b.fNbytesInfo,function(f){var d=new JSROOT.TBuffer(f,0,b);var e=b.ReadKey(d);if(e==null){return c(null)}b.fKeys.push(e);b.ReadObjBuffer(e,function(g){if(g==null){return c(null)}b.ExtractStreamerInfos(g);b.ReadFormulas();c(b)})})};JSROOT.TFile.prototype.ReadKeys=function(b){var c=this;this.ReadBuffer(1024,function(g){if(g==null){return JSROOT.CallBack(b,null)}if(g.substring(0,4)!="root"){alert("NOT A ROOT FILE! "+c.fURL);return JSROOT.CallBack(b,null)}var e=new JSROOT.TBuffer(g,4,c);c.fVersion=e.ntou4();c.fBEGIN=e.ntou4();if(c.fVersion<1000000){c.fEND=e.ntou4();c.fSeekFree=e.ntou4();c.fNbytesFree=e.ntou4();var f=e.ntoi4();c.fNbytesName=e.ntou4();c.fUnits=e.ntou1();c.fCompress=e.ntou4();c.fSeekInfo=e.ntou4();c.fNbytesInfo=e.ntou4()}else{c.fEND=e.ntou8();c.fSeekFree=e.ntou8();c.fNbytesFree=e.ntou4();var f=e.ntou4();c.fNbytesName=e.ntou4();c.fUnits=e.ntou1();c.fCompress=e.ntou4();c.fSeekInfo=e.ntou8();c.fNbytesInfo=e.ntou4()}if(!c.fSeekInfo&&!c.fNbytesInfo){return JSROOT.CallBack(b,null)}var d=c.fNbytesName+22;d+=4;d+=4;d+=18;if(c.fVersion>=40000){d+=12}c.Seek(c.fBEGIN,c.ERelativeTo.kBeg);c.ReadBuffer(Math.max(300,d),function(j){if(j==null){return JSROOT.CallBack(b,null)}var i=new JSROOT.TBuffer(j,c.fNbytesName,c);JSROOT.TDirectory.prototype.StreamHeader.call(c,i);i.o=4;var h=i.ntoi2();if(h>1000){i.shift(28)}else{i.shift(20)}i.ReadTString();i.ReadTString();c.fTitle=i.ReadTString();if(c.fNbytesName<10||this.fNbytesName>10000){console.log("Init : cannot read directory info of file "+c.fURL);return JSROOT.CallBack(b,null)}if(c.fSeekKeys<=0){console.log("Empty keys list - not supported"+c.fURL);return JSROOT.CallBack(b,null)}c.Seek(c.fSeekKeys,c.ERelativeTo.kBeg);c.ReadBuffer(c.fNbytesKeys,function(o){if(o==null){return JSROOT.CallBack(b,null)}var m=new JSROOT.TBuffer(o,0,c);var l=c.ReadKey(m);var n=m.ntoi4();for(var k=0;k<n;k++){l=c.ReadKey(m);c.fKeys.push(l)}c.ReadStreamerInfos(b);delete m});delete i});delete e})};JSROOT.TFile.prototype.ReadDirectory=function(d,c,b){return this.ReadObject(d,c,b)};JSROOT.TFile.prototype.GetStreamer=function(e){var f=this.fStreamers[e];if(typeof(f)!="undefined"){return f}var g;if(this.fStreamerInfos){for(var d in this.fStreamerInfos.arr){if(this.fStreamerInfos.arr[d].fName==e){g=this.fStreamerInfos.arr[d];break}}}if(typeof g=="undefined"){return null}this.fStreamers[e]=new JSROOT.TStreamer(this);if(typeof(g.fElements)!="undefined"){var h=g.fElements["arr"].length;for(var b=0;b<h;++b){var c=g.fElements["arr"][b];if(c.typename==="BASE"){this.GetStreamer(c.fName)}}}if(typeof(g.fElements)!="undefined"){var h=g.fElements["arr"].length;for(var b=0;b<h;++b){var c=g.fElements["arr"][b];var f={};f.typename=c.typename;f["class"]=c.fName;f.cntname=c.countName;f.type=c.type;f.length=c.length;this.fStreamers[e][c.fName]=f}}return this.fStreamers[e]};JSROOT.TFile.prototype.Delete=function(){if(this.fDirectories){this.fDirectories.splice(0,this.fDirectories.length)}this.fDirectories=null;if(this.fKeys){this.fKeys.splice(0,this.fKeys.length)}this.fKeys=null;if(this.fStreamers){this.fStreamers.splice(0,this.fStreamers.length)}this.fStreamers=null;this.fSeekInfo=0;this.fNbytesInfo=0;this.fTagOffset=0}})();